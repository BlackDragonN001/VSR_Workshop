//Version 1.1

//Establish jChat UI Templates which Reduce Subsequent Code
ConfigureInterface()
{

	DefineControlType("JChatButton", "BUTTON")
	{
		Geometry("BOTTOM", "HINTERNAL");
		Pos(0, 1);
		Size(185, 16);
		Style("TRANSPARENT");		
	}

	DefineControlType("JChatKey", "STATIC")
	{
		ColorGroup("COMMANDTEXT");
		Pos(0, 0);
		Size(20, 16);
		Image("colorize.tga", 0, 0);
		Font("MEDIUM");
		JustifyText("RIGHT");
	}

	DefineControlType("JChatText", "STATIC")
	{
		ColorGroup("COMMANDTEXT");
		Pos(25, 0);
		Size(120, 16);
		Image("colorize.tga", 7, 0);
		Font("SMALL");
		JustifyText("LEFT");
	}

 DefineControlType("JChatList", "STATIC")
   {
	Pos(40, 86);
	Size(185, 209);
	Style("TRANSPARENT");

	CreateControl("MainBut", "STATIC")
	{
		ColorGroup("COMMANDTEXT");
		Pos(0, 0);
		Size(128, 16);
		Image("colorize.tga", 0, 0);

		CreateControl("Text", "STATIC")
		{
			Style("TRANSPARENT");
			Pos(0, 0);
			Size(112, 16);

			CreateControl("Text", "STATIC")
			{
				ColorGroup("COMMANDTEXT");
				Pos(10, 0);
				Size(112, 16);
				Style("TRANSPARENT");
				Font("SMALL");
				JustifyText("LEFT");
				UseVar("jchat.title");
			}
		}
	}


	CreateControl("Close", "Button")
	{
		Align("<MainBut");
		Geometry("BOTTOM", "HINTERNAL");
		Pos(0, 4);
		Size(185, 16);
		Style("TRANSPARENT");		

		CreateControl("Key", "Static")
		{
			ColorGroup("COMMANDTEXT");
			Pos(0, 0);
			Size(20, 16);
			Image("colorize.tga", 0, 0);
			Font("TINY");
			JustifyText("RIGHT");
			Text("Ent");
		}

		CreateControl("Item", "JChatText")
		{
			Text("Close");
		}

	}

	CreateControl("1", "Button")
	{
		Align("<Close");
		Geometry("BOTTOM", "HINTERNAL");
		Pos(0, 4);
		Size(185, 16);
		Style("TRANSPARENT");		

		CreateControl("Key", "JChatKey")
		{
			Text("1");
		}

		CreateControl("Item", "JChatText")
		{
			UseVar("jchat.msg1");
		}

	}

	CreateControl("2", "JChatButton")
	{
		Align("<1");

		CreateControl("Key", "JChatKey")
		{
			Text("2");
		}

		CreateControl("Item", "JChatText")
		{
			UseVar("jchat.msg2");
		}
	}

	CreateControl("3", "JChatButton")
	{
		Align("<2");

		CreateControl("Key", "JChatKey")
		{
			Text("3");
		}

		CreateControl("Item", "JChatText")
		{
			UseVar("jchat.msg3");
		}
	}

	CreateControl("4", "JChatButton")
	{
		Align("<3");

		CreateControl("Key", "JChatKey")
		{
			Text("4");
		}

		CreateControl("Item", "JChatText")
		{
			UseVar("jchat.msg4");
		}
	}

	CreateControl("5", "JChatButton")
	{
		Align("<4");

		CreateControl("Key", "JChatKey")
		{
			Text("5");
		}

		CreateControl("Item", "JChatText")
		{
			UseVar("jchat.msg5");
		}
	}

	CreateControl("6", "JChatButton")
	{
		Align("<5");

		CreateControl("Key", "JChatKey")
		{
			Text("6");
		}

		CreateControl("Item", "JChatText")
		{
			UseVar("jchat.msg6");
		}
	}

	CreateControl("7", "JChatButton")
	{
		Align("<6");

		CreateControl("Key", "JChatKey")
		{
			Text("7");
		}

		CreateControl("Item", "JChatText")
		{
			UseVar("jchat.msg7");
		}
	}

	CreateControl("8", "JChatButton")
	{
		Align("<7");

		CreateControl("Key", "JChatKey")
		{
			Text("8");
		}

		CreateControl("Item", "JChatText")
		{
			UseVar("jchat.msg8");
		}
	}

	CreateControl("9", "JChatButton")
	{
		Align("<8");

		CreateControl("Key", "JChatKey")
		{
			Text("9");
		}

		CreateControl("Item", "JChatText")
		{
			UseVar("jchat.msg9");
		}
	}

	CreateControl("*", "JChatButton")
	{
		Align("<9");

		CreateControl("Key", "JChatKey")
		{
			Text("*");
		}

		CreateControl("Item", "JChatText")
		{
			UseVar("jchat.msg0");
		}
	}

	OnEvent("Control::DeactivateSelf")
	{
		Activate("|JChatUnbind");
	}
   }
}

//Default Bind State Code
CreateControl("JChatBind", "JChatKey")
{
	CreateControl("Item", "JChatText"){}

	OnEvent("Control::ActivateSelf")
	{
		Cmd("bind jchat.keymenu 'iface.activate JChatMain'");
		Cmd("bind jchat.qkey1 'network.chateditline jchat.msg1;network.chatline.entered'");
		Cmd("bind jchat.qkey2 'network.chateditline jchat.msg2;network.chatline.entered'");
		Cmd("bind jchat.qkey3 'network.chateditline jchat.msg3;network.chatline.entered'");
		Cmd("bind jchat.qkey4 'network.chateditline jchat.msg4;network.chatline.entered'");
		Cmd("bind jchat.qkey5 'network.chateditline jchat.msg5;network.chatline.entered'");
		Cmd("bind jchat.qkey6 'network.chateditline jchat.msg6;network.chatline.entered'");
		Cmd("bind jchat.qkey7 'network.chateditline jchat.msg7;network.chatline.entered'");
		Cmd("bind jchat.qkey8 'network.chateditline jchat.msg8;network.chatline.entered'");
		Cmd("bind jchat.qkey9 'network.chateditline jchat.msg9;network.chatline.entered'");
		Cmd("bind jchat.qkey0 'network.chateditline jchat.msg0;network.chatline.entered'");
		Deactivate("|JChatBind");
	}
}

//Blanket Unbind Code
CreateControl("JChatUnbind", "JChatKey")
{
	CreateControl("Item", "JChatText"){}

	OnEvent("Control::ActivateSelf")
	{
		Cmd("unbind jchat.key1");
		Cmd("unbind jchat.key2");
		Cmd("unbind jchat.key3");
		Cmd("unbind jchat.key4");
		Cmd("unbind jchat.key5");
		Cmd("unbind jchat.key6");
		Cmd("unbind jchat.key7");
		Cmd("unbind jchat.key8");
		Cmd("unbind jchat.key9");
		Cmd("unbind jchat.key0");
		Cmd("unbind jchat.keymenu");
		Cmd("unbind jchat.qkey1");
		Cmd("unbind jchat.qkey2");
		Cmd("unbind jchat.qkey3");
		Cmd("unbind jchat.qkey4");
		Cmd("unbind jchat.qkey5");
		Cmd("unbind jchat.qkey6");
		Cmd("unbind jchat.qkey7");
		Cmd("unbind jchat.qkey8");
		Cmd("unbind jchat.qkey9");
		Cmd("unbind jchat.qkey0");
		Deactivate("|JChatUnbind");
	}
}

//Code to establish Binds for Main Menu
CreateControl("JChatMainBind", "JChatKey")
{
	CreateControl("Item", "JChatText"){}

	OnEvent("Control::ActivateSelf")
	{
		Cmd("bind jchat.keymenu 'iface.deactivate JChatMain;iface.activate JChatDefault;iface.activate JChatBind;'");
		Cmd("bind jchat.key1 'iface.deactivate JChatMain;iface.activate JChatList1'");
		Cmd("bind jchat.key2 'iface.deactivate JChatMain;iface.activate JChatList2'");
		Cmd("bind jchat.key3 'iface.deactivate JChatMain;iface.activate JChatList3'");
		Cmd("bind jchat.key4 'iface.deactivate JChatMain;iface.activate JChatList4'");
		Cmd("bind jchat.key5 'iface.deactivate JChatMain;iface.activate JChatList5'");
		Cmd("bind jchat.key6 'iface.deactivate JChatMain;iface.activate JChatList6'");
		Cmd("bind jchat.key7 'iface.deactivate JChatMain;iface.activate JChatList7'");
		Cmd("bind jchat.key8 'iface.deactivate JChatMain;iface.activate JChatList8'");
		Cmd("bind jchat.key9 'iface.deactivate JChatMain;iface.activate JChatList9'");
		Cmd("bind jchat.key0 'iface.deactivate JChatMain;iface.activate JChatList0'");
		Deactivate("|JChatMainBind");
	}
}

//Code to establish Binds for List Menus
CreateControl("JChatListBind", "JChatKey")
{
	CreateControl("Item", "JChatText"){}

	OnEvent("Control::ActivateSelf")
	{
		Cmd("bind jchat.keymenu 'iface.deactivate jchat.curmen;iface.activate JChatBind'");
		Cmd("bind jchat.key1 'network.chateditline jchat.msg1;iface.activate JChatListCode'");
		Cmd("bind jchat.key2 'network.chateditline jchat.msg2;iface.activate JChatListCode'");
		Cmd("bind jchat.key3 'network.chateditline jchat.msg3;iface.activate JChatListCode'");
		Cmd("bind jchat.key4 'network.chateditline jchat.msg4;iface.activate JChatListCode'");
		Cmd("bind jchat.key5 'network.chateditline jchat.msg5;iface.activate JChatListCode'");
		Cmd("bind jchat.key6 'network.chateditline jchat.msg6;iface.activate JChatListCode'");
		Cmd("bind jchat.key7 'network.chateditline jchat.msg7;iface.activate JChatListCode'");
		Cmd("bind jchat.key8 'network.chateditline jchat.msg8;iface.activate JChatListCode'");
		Cmd("bind jchat.key9 'network.chateditline jchat.msg9;iface.activate JChatListCode'");
		Cmd("bind jchat.key0 'network.chateditline jchat.msg0;iface.activate JChatListCode'");
		Deactivate("|JChatListBind");
	}
}

//Code invoked on List Closes
CreateControl("JChatListCode", "JChatKey")
{
	CreateControl("Item", "JChatText"){}

	OnEvent("Control::ActivateSelf")
	{
		Cmd("network.chatline.entered;iface.deactivate jchat.curmen;iface.activate JChatBind");
		Deactivate("|JChatListCode");
	}
}

//Launch List UIs which Establish Chatmessages
Exec("bzgame_jchat_lists.cfg");

// Bind on first run
Cmd("iface.activate JChatBind");
Cmd("iface.activate JChatDefault");