#!/usr/bin/python
import os, re

# Added all stock names to start with
existing_msh_list = [
	None, # IMORTANT!
	"FVRECY_DEPLOY",
	"COBIGDA3",
	"SHABAYEV_IDLE3",
	"IVRCKT00",
	"PECLIF08",
	"DARK",
	"IVCONS_CONS2",
	"COBIGDA2",
	"IVCONS_SKEL",
	"COBIGDA1",
	"IVWALK00",
	"IVDROP00",
	"IBRECY00",
	"IVWALK_SKEL",
	"PECLIF19",
	"FVDROP_LAND",
	"PECLIF15",
	"IBRPGEN00",
	"FBS4TOW00",
	"IBPGENGHB01",
	"IBPGENGHC00",
	"IBPGENGHB00",
	"IVWALK_SITDOWN",
	"MIRE",
	"FVDROP_TAKEOFF",
	"PECLIFA1",
	"IWRIFL_COCKPIT_SNIPER",
	"COBIGD01",
	"CBROAD05",
	"IVWALK_IDLE",
	"IWRIFL_COCKPIT_RUN",
	"IVWALK_TURN",
	"IVWALK_WALK",
	"PECLIF04",
	"FBSCAV_UPGRD",
	"CBTURR01",
	"IWRIFL_COCKPIT_STAND",
	"MBRUINE3",
	"FBASPIR00",
	"PBSCEN01",
	"IBMDTOW00",
	"IBRECY_SILO00",
	"FBOVER00",
	"BESNOW02B",
	"ISPILO_BAZOOKA_DEATH01",
	"ISPILO_RIFLE_DEATH01",
	"PBSCEN06",
	"CBHANG03",
	"IVRECY00",
	"IVAPC00",
	"FVDROP_OPEN",
	"IVCONS_STARTUP",
	"ISPILO_BAZOOKA_CROUCH",
	"MANSON01_ISDF01",
	"IVCONS_IDLE",
	"BANEDOME",
	"DARKDOME",
	"IBMTOW00",
	"MANSON02_ISDF01",
	"ISPILO_RIFLE_CROUCH",
	"FVWALK12_WALK",
	"FVWALK12_SKEL",
	"FVWALK12_IDLE",
	"FVWALK12_TURN",
	"CBTOWE04",
	"IBTURR02",
	"FBSCAV_DEPLOY",
	"FVWALK_DEATH01",
	"FVWALK12_DEATH01",
	"FVCONST_DEPLOY",
	"PEAPC00",
	"IVMTNKTD2GH",
	"PECLIF14",
	"FVWALK_WALK",
	"FVWALK_IDLE",
	"ISPILO_RIFLE_JUMP",
	"PBSCEN08",
	"FBSTOW00",
	"FVWALK12_RUN",
	"FVWALK_RUN",
	"ISPILO_BAZOOKA_JUMP",
	"ISPILO_BAZOOKA_SKEL",
	"ISPILO_RIFLE_SKEL",
	"FVWALK_SKEL",
	"FVWALK_TURN",
	"BECRAS02",
	"IVATNK00",
	"PECLIF17",
	"FSPILO_BAZOOKA_DEATH01",
	"FSPILO_RIFLE_DEATH01",
	"SSPILO_BAZOOKA_DEATH01",
	"SSPILO_RIFLE_DEATH01",
	"IBGTOW00",
	"FSPILO_BAZOOKA_SKEL",
	"FSPILO_RIFLE_SKEL",
	"SSPILO_BAZOOKA_SKEL",
	"SSPILO_RIFLE_SKEL",
	"JAK_EAT02",
	"FSPILO_BAZOOKA_RUN",
	"FSPILO_RIFLE_RUN",
	"SSPILO_BAZOOKA_RUN",
	"SSPILO_RIFLE_RUN",
	"IBBOMB00",
	"IBCBUN00",
	"JAK_WALK",
	"ISDPIL02",
	"MBRUIN03",
	"IVHMISL00",
	"JAK_RUN",
	"JAK_EAT01",
	"BESNOW02",
	"IVTURR00",
	"SWRIFL_COCKPIT_SNIPE",
	"FBSPIR00",
	"IVTANKM3C_R",
	"IVHTANK00_R",
	"BBDATA00",
	"FSPILO_BAZOOKA_CROUCH",
	"FSPILO_RIFLE_CROUCH",
	"SSPILO_BAZOOKA_CROUCH",
	"SSPILO_RIFLE_CROUCH",
	"PECLIF06",
	"FBANTM00",
	"SWRIFL_COCKPIT_RUN",
	"SWRIFL_COCKPIT_STAND",
	"BEICED01",
	"IVMISLM2",
	"IVMISLSR",
	"IVMISLSF",
	"IVMISLSN",
	"JAK_CURIOUS",
	"IVBOMB00",
	"JAK_ATTACK02",
	"PBSCEN07",
	"IVHMISLSR",
	"IVHMISLSF",
	"IVHMISLSN",
	"CBTURRD1",
	"IVMISL00",
	"TUNNEL3X00",
	"TUNNEL3X01",
	"FSPILO_BAZOOKA_JUMP",
	"FSPILO_RIFLE_JUMP",
	"SSPILO_BAZOOKA_JUMP",
	"SSPILO_RIFLE_JUMP",
	"FVBURN00",
	"FBLRCKT00",
	"JAK_ATTACK03",
	"IVTANKM2_C",
	"JAK_IDLE",
	"JAK_SKEL",
	"IVTURRSR",
	"IVTURRSF",
	"IVTURRSN",
	"IVPHTANKM2_R",
	"PECREV01",
	"JAK_ATTACK04",
	"IBADTOWL1",
	"FBMDTOW02",
	"FBDOCK00",
	"FVTURR_SKEL",
	"JAK_ATTACK01",
	"IBSTOWLG",
	"FVTURR_DEPLOY",
	"IBSTOW00",
	"IBADTOWL2",
	"IVTANKM2",
	"IVHTANK00",
	"FVARTL_SKEL",
	"CBCAVEE2",
	"CBHANGD2",
	"IVSCAV00",
	"CORE",
	"REND",
	"IVSCOUT00",
	"IBGTOWW05",
	"JAK_DEATH01",
	"FWBZKA_COCKPIT_STAND",
	"FWBZKA_COCKPIT_RUN",
	"FVCONST_DEATH02",
	"SWBZKA_COCKPIT_STAND",
	"SWBZKA_COCKPIT_RUN",
	"CBHANG02",
	"ISDPIL03",
	"CBTOWE02",
	"FVCONST_DEATH01",
	"CBHANG04",
	"CBTOWE05",
	"PERECY00",
	"CBTOWE03",
	"FBFORG00",
	"IBGTOWW06",
	"FVTANKM2_SKEL",
	"IVSCRAP00",
	"IBFACTGH",
	"IVPHTANKM2",
	"PBSCEN02",
	"FVCONST_IDLE",
	"FVTANK_MORPH",
	"FVTANK_SKEL",
	"FVCONST_TURN",
	"FVCONST_WALK",
	"CC111100",
	"DEWORM01",
	"PECLIF21",
	"PECLIF22",
	"IBFACT00",
	"IBFACT09B",
	"FBSTOW01",
	"IVSCOUTSF",
	"IBADTOWS1",
	"IVSCOUTSN",
	"IVSCOUTSR",
	"FBKILN00",
	"CBCAVES1",
	"FVTITAN_SKEL (BROKEN FLOATS)",
	"FVTITAN_SKEL",
	"FBMTOW00",
	"CBTOWE01",
	"IBAGTOW00",
	"FVTURR_ASR",
	"FVTURR_ASF",
	"FVTURR_ASN",
	"BVAULT01",
	"FVTANK_ASR",
	"FVTANK_ASF",
	"FVTANK_ASN",
	"FVTANK_MSF",
	"FVTANK_MSN",
	"FVTANK_MSR",
	"RENDSKY",
	"PLUTODOME",
	"RHINO_DEATH01",
	"RHINO_SKEL",
	"RHINO_EAT",
	"IBGTOWW03",
	"IGGREN00",
	"IBGTOW01",
	"MECOLL02",
	"IBHANG00",
	"IBTELE00",
	"RHINO_FALL01",
	"BMGTOW01",
	"BBRUIN05",
	"IVINTC00",
	"IVTUG00",
	"FVSCAV_SKEL",
	"IBGTOWW04",
	"PECLIF20",
	"MECOLL01",
	"IVINTCSF",
	"IVINTCSN",
	"IVINTCSR",
	"IBCBUN01",
	"IVSTASSF",
	"IVSTASSN",
	"IVSTASSR",
	"IVSTAS00",
	"IBPGEN00",
	"CBROAD01",
	"PESCAV00",
	"FVCONST_SKEL",
	"PECLIF10",
	"PECRYS04",
	"IBMDTOWL1",
	"CBTOWE06",
	"RCWORM01",
	"PEROCK01",
	"CBHANG01",
	"IBGTOWW1",
	"PETANK00",
	"IBHRCKT3",
	"IBHRCKT4",
	"IVMBIK00M2",
	"BBRUIN04",
	"RHINO_GROWL",
	"PBDEBR02",
	"IBRCKT3",
	"IBRCKT4",
	"IBSTOW01",
	"BURNS_BODY",
	"PECLIF07",
	"IVMBIK00",
	"IBLRCKT4",
	"IBLRCKT3",
	"IVMBIKSN",
	"IVMBIKSF",
	"IVMBIKSR",
	"IVBSUB00",
	"RHINO_WALK",
	"IBMTOWL1",
	"COTRAN01",
	"FVSENT_MORPH",
	"FVSENT_SKEL",
	"IVBSUB01",
	"IBPGEN01",
	"PBHALL00",
	"IBSBAY00",
	"FVSERV_SKEL",
	"IVSCOUTL1",
	"DESMLH01",
	"BVMSTATUEGH",
	"BBGTOW01",
	"IVSHSCAV00_SF",
	"IVSHSCAV00_SN",
	"IVSHSCAV00_SR",
	"IVSHSCAV00_DEPLOY",
	"FVSENT_ASR",
	"FVSENT_MSF",
	"FVSENT_MSR",
	"FVSENT_ASF",
	"FVSENT_MSN",
	"FVSENT_ASN",
	"IGSATC00",
	"IBTURR00",
	"FVHTANK00",
	"IVMISLL1",
	"CBROAD06",
	"IBSBAY02",
	"FVLANCER_SKEL",
	"IVTANK00",
	"CBROAD04",
	"CBSHLD01",
	"MBRUIN04",
	"FBDOWE00",
	"FVLANCER_MORPH",
	"BBRUIN02",
	"IVSSUB01",
	"IVATNKL1",
	"CBROAD02",
	"BBSTAT01",
	"IBTRAIN00",
	"IVRCKTL1",
	"DEBIGH01",
	"MIREDOME",
	"TITANDOME",
	"BBSUBW06",
	"PBSBAY01",
	"DORELC01",
	"IVSHSCAV00",
	"FVSCRAP00",
	"BBRUIN03",
	"FVSCOUT_MORPH",
	"CBCAVEE1",
	"BBMSTATUEGH",
	"ISDPIL01",
	"CBSHLD00",
	"CBTOWE07",
	"CBCAVEC2",
	"BBSUBW04",
	"BCHAM_DOME",
	"FVTUG_ASF",
	"FVTUG_ASN",
	"FVTUG_ASR",
	"PBETUN00",
	"IVSERVL1",
	"BBSUBW05",
	"IVSSUB00",
	"IVSSUB",
	"PBTWOS01",
	"BLDG03",
	"BLDG01",
	"FVSCOUT_ASR",
	"IBMEGA00",
	"FVSCOUT_MSF",
	"FVSCOUT_ASF",
	"FVSCOUT_MSR",
	"FVSCOUT_ASN",
	"FVSCOUT_MSN",
	"BBSUBW03B",
	"FVLANCER_MSF",
	"FVLANCER_MSN",
	"FVLANCER_ASN",
	"FVLANCER_ASF",
	"BBRUIN01",
	"FVLANCER_MSR",
	"FVLANCER_ASR",
	"PLUTO",
	"MBRUIN02",
	"DORELC02",
	"FVSCOUT_SKEL",
	"IBSILO01",
	"BLDG02",
	"FVTUG_SKEL",
	"CEWCOR01",
	"IVAPCL1",
	"GBAG01",
	"CBCAVES2",
	"MBRUIN01",
	"FVRECY_SKEL",
	"BVMEGA00",
	"CBCAVEC1",
	"ROROCK05",
	"PBSBAY00",
	"BBDEST02",
	"IVMBIKL1",
	"PBTWOS00",
	"IVTANKL1",
	"PBTRAN00",
	"FISHY",
	"IVTRANS00",
	"PBONES01",
	"BBSUBW01",
	"PBATUN03",
	"MCWING_FLY",
	"MCWING_SKEL",
	"IVSCAVL1",
	"RBRUIN01",
	"IBBSTR01",
	"FBSILO00",
	"DEDOME01",
	"FBSTRO00",
	"MOUPRT00",
	"BBGTOW09",
	"IBSILO00",
	"BMGTOW02",
	"IBRECYL1",
	"IBARMOGH",
	"IBWXSEGC00",
	"IBARMO00",
	"BBSUBW03",
	"MBWALL03",
	"IBWXSEGC01",
	"FBJAMM_BP",
	"IBSTOWL1",
	"COSEEK00",
	"SGBZKA_STAND",
	"SGSEEK00",
	"BURNS_SHIP",
	"PBWSEG04",
	"CEBRDG01",
	"IVMISL_COCKPIT",
	"ROPILR05",
	"POROCK03",
	"IGJETP00",
	"MEBRIDGE2",
	"RCLPOD01",
	"RCLPOD02",
	"RCLPOD03",
	"PECRACK02",
	"SGSEEKFIX",
	"IVSERV_COCKPIT",
	"MBWALL02",
	"IBWTSEGC00",
	"TUNNEL_1D",
	"TUNNEL_1E",
	"IBBSTR00",
	"PBTUNN01",
	"IOCHNK07",
	"IOCHNK06",
	"IBMEGA_TAP",
	"IVMBIKE_COCKPIT",
	"PBWSEG02",
	"PBONES00",
	"IBWTSEGC01",
	"MBWALL01",
	"MOBUSH02",
	"FVBURN02",
	"ROPILR02",
	"DBRUIN01",
	"PECRACK01",
	"FBJAMM00",
	"IBBOMBL1",
	"ROPILR04",
	"MOROCK03",
	"PBETUNL1",
	"IBBSEG01",
	"IGBZKA_SKEL",
	"ROPILR01",
	"DAYWRECKER00",
	"PBTELE01",
	"PBTELE05",
	"PBTELE02",
	"FGSATC00",
	"FBOVERL1",
	"SGSATC00",
	"PBWSEG03",
	"IBTCEN00",
	"PBWTOW",
	"IVINTC_COCKPIT",
	"IVSTAS_COCKPIT",
	"SGGREN00",
	"ROPILR03",
	"RBRUIN03",
	"PBTUNN06",
	"FBSILO01",
	"BOCRYST02",
	"IBAGTOWL1",
	"IVDRONE_A",
	"RBRUIN02",
	"RBRUIN08",
	"IVDRONE_C",
	"DOSPIK01",
	"IBBSEG00",
	"RBRUIN07",
	"DOSPIK02",
	"IGSNIP_DEPLOY",
	"SLIGHT01",
	"IBTRICK00",
	"IBSTOWLG1",
	"IGFLAR00",
	"PBTUNN03",
	"PBTUNN04",
	"IGSNIP_STAND",
	"IGSNIP_SKEL",
	"CEWCAP01",
	"STHAVENDOME",
	"STTRONICDOME",
	"FGJETP00",
	"IBWSTRC00",
	"BOICE01",
	"SGJETP00",
	"IVRECYL1",
	"IHRAD00",
	"BBDEST03",
	"PBATUN01",
	"PBTUNN02",
	"IVMBIKEM2_COCKPIT",
	"MOSHRM01",
	"FBDOWEL1",
	"IBWSEGC01",
	"IBWSEGC00",
	"ROROCK06",
	"SGSNIP__STAND",
	"FBLUNG00",
	"MBRUIN06",
	"IVHTANKM2_COCKPIT",
	"IVRCKTL2",
	"PECRYS02",
	"FBFORGL1",
	"IBWSTRC01",
	"IVTURR_COCKPIT",
	"RBRUIN04",
	"APSHLD00",
	"DBRUIN02",
	"PBATUN06",
	"IBRSILO00",
	"IOSTAND01",
	"SOSTAND01",
	"IBFACTL1",
	"IVSCOUT_COCKPIT",
	"APREPA00",
	"PBWSEG05",
	"FVSAV00",
	"DBRUIN03",
	"IGGREN01",
	"BOICE03",
	"IGMCUR00",
	"PBSCEN03",
	"PBATUN02",
	"IVTANK_COCKPIT",
	"FBANTML1",
	"APAMMO00",
	"APSERV00",
	"APMISL00",
	"APSPEC00",
	"APCANN00",
	"APMORT00",
	"APGUN00",
	"BBSUBW07",
	"BBDEST01",
	"STBOWLPALM01",
	"BOICE02",
	"SGWASP00",
	"BRPOOL01",
	"SWCOR01",
	"PEPOOL03",
	"DZPOOLGH01",
	"IGMITS00",
	"BBDEST04",
	"WEPOOL01",
	"PEPOOL01",
	"REPOOL01",
	"TEPOOL01",
	"EEPOOL01",
	"MAPOOL01",
	"UEPOOL01",
	"MEPOOL01",
	"BEPOOL01",
	"DEPOOL00",
	"IBCBUNL1",
	"SPAWN01",
	"STTERRACESTAT01",
	"STAMINOSTAT01",
	"TOSPIR02",
	"IVWALK_COCKPIT",
	"PBSCEN11",
	"IVATNKL2",
	"IGPROX00",
	"PBWALL",
	"PBWALL01",
	"BBSUBW02",
	"IVRCKT_COCKPIT",
	"FBATAP00",
	"BBDEST05",
	"IBSBAYL1",
	"IBSBAYL11",
	"IVCONS_COCKPIT",
	"IBGTOWL1",
	"IBPGENGHL1",
	"BOCRYST01",
	"SGSATC01",
	"PBATUN07",
	"IVSCAVL2",
	"PBTUNN07",
	"PBTELE04",
	"PBTUNN05",
	"PBATUN05",
	"CEPOOL01",
	"SEPOOL01",
	"IVMBIKL2",
	"PBSCEN04",
	"APHAND00",
	"APPACK00",
	"PBATUN04",
	"IVTUGL1",
	"PECRYS03",
	"IOFLAG01",
	"SOFLAG01",
	"IPDROP01",
	"IVMISLL2",
	"FBKILNL1",
	"FOFLAG01",
	"POROCK04",
	"IBRECY_LSILO00",
	"IBWSTR01",
	"IBWSTR00",
	"FVSENT_COCKPIT",
	"IVSCAV_COCKPIT",
	"PBSCEN09",
	"PBWCOR01",
	"IBPGENL1",
	"STBOWLPALM02",
	"IBRECY_RSILO00",
	"TOSPIR01",
	"PBDEBR01",
	"STBOWLPOOL00",
	"IBTRAINL1",
	"IVTANKL2",
	"DOSPIK04",
	"DOSPIK03",
	"ROROCK02",
	"IBWSEG00",
	"IBWSEG01",
	"CEWSEG01",
	"ROROCK01",
	"IOCMET00",
	"IOCMET01",
	"ROROCK04",
	"IBNAV00",
	"ROROCK03",
	"PBTELE03",
	"IBTCENL1",
	"SLIGHT02",
	"GATSTAB",
	"CBNOZZ01",
	"MOGARG01",
	"FVSERV_COCKPIT",
	"IVSCOUTL2",
	"MOPALM02",
	"SWSID01",
	"PSPWN_1",
	"MOSHRM02",
	"BCURCH01",
	"MOGARG02",
	"MOBUSH01",
	"IBBSEGL1",
	"MOGARG03",
	"MOROCK02",
	"BLSTPOOL",
	"IBSPOT00",
	"OBBMBONUS",
	"FVTITAN_COCKPIT",
	"MOCRWN01",
	"FVCONST_COCKPIT",
	"MBRUIN05",
	"NEPOOL01",
	"IBBSTRL2",
	"IBCRAT02",
	"SWSEG01",
	"MOPUFF01",
	"IBBSEGL2",
	"FVTANK_COCKPIT",
	"MOROCK01",
	"FVLANCER_COCKPIT",
	"FBSTROL1",
	"FVTURR_COCKPIT",
	"RBRUIN05",
	"RBRUIN06",
	"IGBOLT00",
	"FVTUG_COCKPIT",
	"FVSCAV_COCKPIT",
	"CBPCON01",
	"NPSCR300",
	"NPSCR200",
	"NPSCR100",
	"FVSCOUT_COCKPIT",
	"IOARTL00",
	"IORCKT00",
	"GSPSTAB",
	"CBHANGP2",
	"PBWCAP",
	"PBWCAP02",
	"IBBSTRL1",
	"FVWALK12_COCKPIT",
	"FVWALK_COCKPIT",
	"FORCKT01",
	"CBPCON06",
	"IOCHNK04",
	"IOCHNK05",
	"APCAMR00",
	"FBBASE00",
	"IBCRAT01",
	"IBBASE00",
	"PBFENC02",
	"FVRCKT00",
	"CBPCON02",
	"IBLITE00",
	"PBSCEN05",
	"SGPROJ00",
	"SGSTNG00",
	"IOCHNK01",
	"MOGRASS02",
	"PBFENC01",
	"IOCHNK03",
	"G_FFLASH",
	"CBPCON04",
	"IOCHNK02",
	"SIGN01",
	"CBPCON05",
	"SGMLOC00",
	"MOALG01",
	"MOALG02",
	"SIGN06",
	"SIGN08",
	"SIGN09",
	"SIGN05",
	"SIGN07",
	"SIGN03",
	"SIGN02",
	"SIGN04",
	"SOUNDCUBE",
	"IBCRAT00",
	"G_SFLASH",
	"MOGRASS01",
	"DOCOMT01",
	"ATST_DEATH03",
	"RESLID01",
	"ATST_WALK",
	"ATST_DEATH01",
	"ATST_DEATH02",
	"ATST_IDLE",
	"RESLIDA1",
	"ATST_TURN",
	"BEBRIG02",
	"ATST_SKEL",
	"PECLIF09",
	"BETUNNA0",
	"BETUNN00",
	"DEQUAR01",
	"PECLIF03",
	"JAK_KILL",
	"BESNOW01",
	"RECARR00",
	"PECLIF12",
	"RECINT01",
	"RETUNN01",
	"BEBRIG01",
	"PECLIF16",
	"CBSCOM00",
	"BECRAS01",
	"ANIMALLAND",
	"MESLIDA2",
	"IVARTL4_GH",
	"PECLIF11",
	"IVCARR00_CRASH",
	"RECINT02",
	"PECLIF01",
	"IVCARR00_SKEL",
	"IVMTNKDGH",
	"MESLIDA4",
	"MESLIDA3",
	"MESLIDA1",
	"RETUNN00",
	"IVDROP00_TAKEOFF",
	"IVHRCKTD00GH",
	"PECLIF05",
	"BANE",
	"BEICED03",
	"BEICED02",
	"RBDATA00",
	"PBSCEN10",
	"IVARTL2_GH",
	"FVSPEEDSR",
	"FVSPEEDSF",
	"FVSPEEDSN",
	"PECLIF18",
	"FVSPEED00",
	"ISPILO_BAZOOKA_RUN",
	"IVDROP02_LAND",
	"PECLIF02",
	"ISPILO_RIFLE_RUN",
	"IVPROB00",
	"IVMTNKSGH",
	"FVSPEED_COCKPIT",
	"IBSCAV00",
	"IVWALK_DEATH2",
	"IVDROP_LAND",
	"IVDROP00_LAND",
	"IVDROP00_SHAKE",
	"IVWALK_DEATH3",
	"IVWALK_DEATH",
	"IVDROP00_OPEN",
	"DOVOYA",
	"ISPILO_RIFLE_TALKLOOP",
	"IVCONS_CONS",
	"CBROADA4",
	"PECRYS01",
	"IVCONS_CONS3",
	"MBDATA00",
	"IVDROP00_CRASH",
	"IVWALK02",
	"IBSCUP00",
	"IVDROP02_BANK",
	"IVDROP00_FLY",
	"MEBRIDGE1",
	"IVHRCKTS00GH",
	"IWBAZO_COCKPIT_SKEL",
	"IWBAZO_COCKPIT_RUN",
	"IVCONS_DEATH3",
	"PBCOMM00",
	"IVDROP02_FLY",
	"CRASHSITE",
	"IVCONS_WALK",
	"IVCONS_TURN",
	"IBSCAV01",
	"IVCONS_DEATH2",
	"IBSCUP01",
	"IVSERV_REPAIR",
	"IVCONS_DEATH",
	"IVDROP02_OPEN",
	"IVDROP00_CRASHSITE",
	"PECLIF13",
	"SHABAYEV_IDLE1",
	"JAK_SPRINT",
	"IVARTL2_GH_OLD",
	"IVRCKTSNG00",
	"IVARTL4_GH_OLD",
	"IVRCKTGH",
	"IVWALK01",
	"BEBRG06",
	"SHABAYEV_IDLE2",
	"DRAKE_SKEL",
	"AEGREND",
	"ZFOLIAG3",
	"ZFOLIAG2",
	"IVSERV_SKEL"
]

odf_files = []

def ODF_GetGeom(file):
	re_section = re.compile(r"\s*\[([^\]]+)\]")
	re_geomname = re.compile(r"(?i)\s*geometryName\s*=\s*([\"'])([^\1]*?\.xsi)\1")
	
	with open(file, "r") as odf:
		in_goc = False
		
		for ln in odf:
			secmatch = re_section.match(ln)
			
			if in_goc:
				if secmatch: # New section encountered outside of GO class.
					break
				
				vmatch = re_geomname.match(ln)
				if vmatch:
					return vmatch.group(2)[0:-4].upper()
			elif secmatch:
				if secmatch.group(1).upper() == "GAMEOBJECTCLASS":
					in_goc = True

if __name__ == "__main__":
	for root, dirs, files in os.walk("./"):
		for file in files:
			ext = file[-4::].upper()
			if ext == ".ODF":
				odf_files += [os.path.join(root, file)]
			elif ext == ".MSH":
				existing_msh_list += [file[0:-4].upper()]
	
	fail_count = 0
	for file in odf_files:
		geom = ODF_GetGeom(file)
		if not geom in existing_msh_list:
			print("MSH not found for %r in %r!" % (geom + ".XSI", file))
			fail_count += 1
	
	if fail_count == 0:
		print("Everything OK, no missing .MSH files referenced in %d ODFs." % len(odf_files))
	
	input("Press ENTER to exit.")
